# auto-generated by grc.converter

id: sparsdr_compressing_usrp_source
label: Compressing USRP Source
category: '[SparSDR]'

parameters:
-   id: device_addr
    label: Device Address
    dtype: string
-   id: center_freq
    label: Center frequency
    dtype: real
-   id: gain
    label: Gain
    dtype: real
-   id: threshold
    label: Threshold
    dtype: real
-   id: antenna
    label: Antenna
    dtype: string

outputs:
-   domain: stream
    dtype: sc16

templates:
    imports: |-
        import sparsdr
        from gnuradio import uhd
    make: "sparsdr.compressing_usrp_source(uhd.device_addr(${device_addr}))\nself.${id}.set_center_freq(uhd.tune_request(${center_freq}))\n\
        self.${id}.set_antenna(${antenna})\nself.${id}.set_gain(${gain})\n# Configure\
        \ compression\nself.${id}.set_compression_enabled(True)\nself.${id}.stop_all();\n\
        \n# Clear masks and set threshold\nfor i in range(2048):\n    self.${id}.set_mask_enabled(i,\
        \ False);\n    self.${id}.set_threshold(i, ${threshold})\n\n# Start compression\n\
        self.${id}.start_all()\n  "

file_format: 1
